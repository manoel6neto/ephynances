<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:pe="http://primefaces.org/ui/extensions" >

    <ui:composition template="/template.xhtml"> 
        <ui:define name="title"> 
            <h:outputText style="font-size: large" value="CADASTRAR NOVO CONTRATO"/>
        </ui:define>
        <ui:define name="body"  >
            <h:form id="form" styleClass="form">
                <br class="clear" />
                <br/>
                <p:fieldset legend="Dados do contrato" toggleable="true" collapsed="false">
                    <br class="clear" />
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Tipo de contrato: " for="menuTipoContrato" />
                        <p:selectOneMenu id="menuTipoContrato" style="width: 200px" value="#{agreementController.agreement.agreementType}" required="true" effect="fade">
                            <p:ajax update="@form" listener="#{agreementController.filterProponentsForAgreementType()}"/>
                            <f:selectItem noSelectionOption="true" itemLabel="Selecione" />
                            <f:selectItems value="#{agreementController.agreementTypes}"/>
                        </p:selectOneMenu>
                    </div>

                    <h:panelGroup rendered="#{agreementController.checkIsType('PARLAMENTAR')}">
                        <br class="clear" />
                        <br/>
                        <div class="grid_4 alpha" >
                            <p:outputLabel value="Tipo de parlamentar: " for="menuTipoParlamentar" />
                            <p:selectOneMenu id="menuTipoParlamentar" style="width: 200px" value="#{agreementController.agreement.agreementSubType}" required="false" effect="fade" >
                                <f:selectItem noSelectionOption="false" itemLabel="Parcial" itemValue="Parcial"/>
                                <f:selectItem noSelectionOption="false" itemLabel="Completo" itemValue="Completo"/>
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Cnpj principal (Cadastro e-Sicar): " for="cnpjprincipal" />
                        <p:selectOneMenu id="cnpjprincipal" style="width: 200px" value="#{agreementController.proponentSiconv}" required="true" effect="fade" converter="proponentSiconvConverter" disabled="#{agreementController.checkIsType('PARLAMENTAR')}">
                            <p:ajax update="qntiCnpj" listener="#{agreementController.checkQuantCnpjMunicipal()}"/>
                            <f:selectItem noSelectionOption="true" itemLabel="Selecione" />
                            <f:selectItems value="#{agreementController.filteredProponents}" var="proponent" itemLabel="#{proponent.cnpj} - #{proponent.nome}" itemValue="#{proponent}"/>
                        </p:selectOneMenu>
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Código do contrato (Contratante): " for="codContractOwner" />
                        <p:inputText id="codContractOwner" style="width: 200px" value="#{agreementController.agreement.contactAgreementNumber}" required="true" requiredMessage="Código do contrato (Contratante) é necessário"/> 
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Email de contato: " for="emailContato" />
                        <p:inputText id="emailContato" style="width: 200px" value="#{agreementController.agreement.contactEmail}" required="false"/> 
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Telefone de contato: " for="phoneContact" />
                        <p:inputMask id="phoneContact" style="width: 200px" value="#{agreementController.agreement.contactPhone}" required="false" mask="(99) 9999-9999" />
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Código do contrato (Physis): " for="codContractPhysis" />
                        <p:inputText id="codContractPhysis" style="width: 200px" value="#{agreementController.agreement.physisAgreementNumber}" disabled="false" readonly="true"/> 
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Valor do contrato (R$): " for="valorTotal" />
                        <pe:inputNumber id="valorTotal" symbol="R$ " style="width: 200px" value="#{agreementController.agreement.totalPrice}" required="true" requiredMessage="Informe o valor total do contrato em reais" /> 
                    </div>
                    
                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Data assinatura do contrato: " for="assignmentDate" />
                        <p:calendar id="assignmentDate" locale="pt_BR" size="37" style="width: 200px;" value="#{agreementController.agreement.assignmentDate}" mask="99/99/9999" pattern="dd/MM/yyyy" />
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Período (Meses): " for="periodo" />
                        <p:inputText id="periodo" style="width: 200px" value="#{agreementController.agreement.period}" required="true" requiredMessage="Informe o tempo de vigência em meses" maxlength="2"/> 
                        <p:watermark for="periodo" value="12"/>
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Quantidade CNPJ: " for="qntiCnpj" />
                        <p:inputText id="qntiCnpj" style="width: 200px" value="#{agreementController.agreement.cnpjAmount}" required="true" requiredMessage="Informe quantos Cnpjs para o contrato" readonly="#{agreementController.disableQuantCnpjs}"/> 
                    </div>

                    <br class="clear" />
                    <br />
                </p:fieldset>

                <br class="clear" />
                <br/>
                <p:fieldset legend="Dados do Gestor do Sistema" toggleable="true" collapsed="false">
                    <br class="clear" />
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Nome do Gestor: " for="nomeResp" />
                        <p:inputText id="nomeResp" style="width: 200px" value="#{agreementController.agreement.managerName}" required="true" requiredMessage="Nome do Gestor necessário"/> 
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Entidade do Gestor: " for="entityResp" />
                        <p:inputText id="entityResp" style="width: 200px" value="#{agreementController.agreement.managerEntity}" required="true" requiredMessage="Entidade do Gestor necessária"/> 
                    </div>
                    
                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Número do parlamentar: " for="parlamentNumberI" />
                        <p:keyboard id="parlamentNumberI" keypadOnly="true" style="width: 200px" value="#{agreementController.agreement.parlamentNumber}" required="false" /> 
                    </div>
                    
                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Estado do parlamentar (Sigla): " for="parlamentState" />
                        <p:inputText id="parlamentState" style="width: 200px" value="#{agreementController.agreement.parlamentNumber}" required="false" maxlength="2" /> 
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Email do Gestor: " for="emailResp" />
                        <p:inputText id="emailResp" style="width: 200px" value="#{agreementController.agreement.managerEmail}" required="true" requiredMessage="Email do Gestor necessário"/> 
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="CPF do Gestor: " for="cpf" />
                        <p:inputMask id="cpf" style="width: 200px" value="#{agreementController.agreement.managerCpf}" mask="999.999.999-99" required="true" requiredMessage="CPF é necessário"> 
                            <f:validator for="cpf" validatorId="cpfValidator" />
                        </p:inputMask>
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Telefone do Gestor: " for="phone" />
                        <p:inputMask id="phone" style="width: 200px" value="#{agreementController.agreement.managerPhone}" required="false" mask="(99) 9999-9999" />
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_4 alpha" >
                        <p:outputLabel value="Celular do Gestor: " for="cellphone" />
                        <p:inputMask id="cellphone" style="width: 200px" value="#{agreementController.agreement.managerCellPhone}" required="false" mask="(99) 9999-9999?"/> 
                    </div>

                    <br class="clear" />
                    <br/>
                </p:fieldset>

                <br class="clear" />
                <br/>
                <p:fieldset id="fieldCnpjsPrivate" legend="CNPJ's Contrato Privado" toggleable="true" collapsed="true" rendered="#{agreementController.checkIsType('PRIVADO')}">

                    <br class="clear" />
                    <br/>
                </p:fieldset>

                <br class="clear" />
                <br/>
                <div class="grid_3" style="line-height: 30px;" >
                    <p:commandButton style="color: #FF0000" styleClass="grid_1 alpha" action="#{agreementController.addAgreement()}" value="Cadastrar" update="@form" ajax="false"/>
                </div>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
