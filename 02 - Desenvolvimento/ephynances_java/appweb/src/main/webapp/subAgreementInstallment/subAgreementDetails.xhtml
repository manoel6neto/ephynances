<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core" >

    <ui:composition template="/template.xhtml"> 
        <ui:define name="title"> 
            <h:outputText  value="SubParcela: #{subAgreementInstallmentController.subAgreementInstallment.value}"/>
        </ui:define>
        <ui:define name="body"  >
            <h:form id="formDetails">
                <br class="clear" />
                <br/>
                <p:fieldset legend="Detalhes" toggleable="true" collapsed="false">
                    <br class="clear" />
                    <div >
                        <p:outputLabel value="Contrato: #{subAgreementInstallmentController.subAgreementInstallment.agreementInstallment.agreement.physisAgreementNumber}" style="color: #000000; font-style: oblique; font-size: medium"/>
                    </div>

                    <br class="clear" />
                    <div >
                        <p:outputLabel value="Status contrato: #{subAgreementInstallmentController.subAgreementInstallment.agreementInstallment.agreement.status}" style="color: #000000; font-style: oblique; font-size: medium"/>
                    </div>

                    <br class="clear" />
                    <div >
                        <p:outputLabel value="Parcela de origem: #{subAgreementInstallmentController.subAgreementInstallment.agreementInstallment.value}" style="color: #000000; font-style: oblique; font-size: medium"/>
                    </div>

                    <br class="clear" />
                    <div >
                        <p:outputLabel value="Data pagamento (parcela de origem): #{subAgreementInstallmentController.formatDate(subAgreementInstallmentController.subAgreementInstallment.agreementInstallment.payment.paymentDate)}" style="color: #000000; font-style: oblique; font-size: medium"/>
                    </div>

                    <br class="clear" />
                    <div >
                        <p:outputLabel value="Status parcela de origem: #{subAgreementInstallmentController.agreementInstallment.status}" style="color: #000000; font-style: oblique; font-size: medium"/>
                    </div>

                    <br class="clear" />
                    <br/>
                </p:fieldset>
            </h:form>

            <h:form id="formPayment">
                <br class="clear" />
                <br/>
                <p:fieldset legend="Dados pagamento" toggleable="true" collapsed="false">
                    <br class="clear" />
                    <div >
                        <p:outputLabel value="Valor da subparcela: #{subAgreementInstallmentController.subAgreementInstallment.value}" style="color: #000000; font-style: oblique; font-size: medium"/>
                    </div>

                    <br class="clear" />
                    <div >
                        <p:outputLabel value="Status subparcela: #{subAgreementInstallmentController.checkStatusSubAgreementInstallment()}" style="color: #000000; font-style: oblique; font-size: medium"/>
                    </div>

                    <br class="clear" />
                    <div class="grid_3 alpha" >
                        <p:outputLabel value="Valor para pagamento: " for="paymentValue" />
                        <p:inputText id="paymentValue" style="width: 200px" value="#{subAgreementInstallmentController.payment.totalValue}" required="false" readonly="#{subAgreementInstallmentController.subAgreementInstallment.payment == null}"/> 
                        <p:watermark for="paymentValue" value="0" />
                    </div>

                    <br class="clear" />
                    <br/>
                    <div class="grid_3 alpha" >
                        <p:commandButton id="paymentButton" value="Pagar" update="@form" ajax="false" action="#{subAgreementInstallmentController.addSubInstallmentPayment()}" readonly="#{subAgreementInstallmentController.subAgreementInstallment.payment == null}"/>
                    </div>

                    <br class="clear" />
                    <br/>
                </p:fieldset>
            </h:form>

            <h:form id="formDocs" enctype="multipart/form-data" prependId="true">
                <br class="clear" />
                <br/>
                <p:fieldset legend="Documentos do pagamento" toggleable="true" collapsed="false">
                    <p:fieldset legend="Adicionar documento" toggleable="true" collapsed="false">
                        <br class="clear" />
                        <div class="grid_3 alpha" >
                            <p:outputLabel value="Nome do documento: " for="nameDocument" />
                            <p:inputText id="nameDocument" style="width: 200px" value="#{subAgreementInstallmentController.paymentDocument.name}" required="false" /> 
                        </div>

                        <br class="clear" />
                        <br/>
                        <div class="grid_3 alpha" >
                            <p:outputLabel value="Descrição do documento: " for="descriptionDocument" />
                            <p:inputTextarea id="descriptionDocument" rows="6" cols="60" value="#{subAgreementInstallmentController.paymentDocument.description}" required="false" /> 
                        </div>

                        <br class="clear" />
                        <br/>
                        <div class="grid_3 alpha" >
                            <p:fileUpload value="#{subAgreementInstallmentController.file}" mode="simple" previewWidth="200" />
                        </div>

                        <br class="clear" />
                        <br/>
                        <div class="grid_3 alpha" >
                            <p:commandButton id="uploadFileButton" value="Upload" update="@form" ajax="false" actionListener="#{subAgreementInstallmentController.upload()}" />
                        </div>

                        <br class="clear" />
                        <br/>
                    </p:fieldset>

                    <p:fieldset legend="Documentos existentes" toggleable="true" collapsed="false">

                        <br class="clear" />
                        <br/>
                    </p:fieldset>

                    <br class="clear" />
                    <br/>
                </p:fieldset>
            </h:form>
        </ui:define>
    </ui:composition>
</html>